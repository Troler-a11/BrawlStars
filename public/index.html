async function searchPlayer() {
    const tag = document.getElementById('playerTag').value.trim();
    if(!tag) return alert("–í–≤–µ–¥–∏ —Ç–µ–≥!");
    
    const resultDiv = document.getElementById('result');
    resultDiv.style.display = 'block';
    resultDiv.innerHTML = "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...";

    try {
        // –ó–∞–º—ñ–Ω–∏ URL –Ω–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –≤—ñ–¥ —Ç–≤–æ–≥–æ Render –ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é
        const response = await fetch(`/api/player/${tag.replace('#', '')}`);
        const data = await response.json();

        if(data.error) throw new Error(data.error);

        resultDiv.innerHTML = `
            <h2>${data.name}</h2>
            <p>–ö–ª—É–±: ${data.club?.name || '–ù–µ–º–∞—î'}</p>
            <div style="font-size: 24px; color: #f1c40f;">üèÜ ${data.trophies}</div>
            <p>–†—ñ–≤–µ–Ω—å: ${data.expLevel} | –ü–µ—Ä–µ–º–æ–≥ 3v3: ${data['3vs3Victories']}</p>
            <h3>–ë—ñ–π—Ü—ñ (${data.brawlers.length}):</h3>
            <div class="brawler-grid">
                ${data.brawlers.map(b => `
                    <div class="brawler-item">
                        <b>${b.name}</b><br>
                        üèÜ ${b.trophies} (–†–∞–Ω–≥ ${b.rank})
                    </div>
                `).join('')}
            </div>
        `;
    } catch (err) {
        resultDiv.innerHTML = "–ü–æ–º–∏–ª–∫–∞: " + err.message;
    }
}
